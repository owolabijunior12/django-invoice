{% load static %}

<!doctype html>
<html lang="en" class="h-full antialiased">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Iboy Technology — Sign in</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="h-full bg-slate-50 text-slate-800">
    <main class="grid min-h-full place-items-center px-4 py-12">
      <div class="w-full max-w-md">
        <div class="overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm">
          <div class="border-b border-slate-200 px-6 py-5 text-center">
            <img src="{% static 'assets/img/logo.png' %}" class="mx-auto h-10 w-auto" alt="Iboy Technology">
            <h1 class="mt-3 text-xl font-semibold">Sign in to your account</h1>
          </div>

          {% if messages %}
          <div class="space-y-2 px-6 pt-4">
            {% for message in messages %}
              <div class="rounded-lg border px-4 py-3 text-sm
                  {% if 'error' in message.tags %} border-rose-200 bg-rose-50 text-rose-800
                  {% elif 'success' in message.tags %} border-emerald-200 bg-emerald-50 text-emerald-800
                  {% else %} border-slate-200 bg-slate-50 {% endif %}">
                {{ message }}
              </div>
            {% endfor %}
          </div>
          {% endif %}

          <form action="#" method="post" class="px-6 pb-6 pt-4 space-y-4" novalidate>
            {% csrf_token %}

            <!-- Email -->
            <div>
              <label for="{{ form.username.id_for_label }}" class="mb-1 block text-sm font-medium text-slate-700">
                Email address
              </label>
              <input
                type="text"
                name="{{ form.username.name }}"
                id="{{ form.username.id_for_label }}"
                value="{{ form.username.value|default_if_none:'' }}"
                placeholder="you@example.com"
                class="w-full rounded-lg border border-slate-300 bg-white px-3 py-2.5 text-sm text-slate-800 placeholder-slate-400 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500" />
              {% if form.username.errors %}
                <p class="mt-1 text-sm text-rose-600">{{ form.username.errors.0 }}</p>
              {% endif %}
            </div>

            <!-- Password -->
            <div>
              <div class="mb-1 flex items-center justify-between">
                <label for="{{ form.password.id_for_label }}" class="block text-sm font-medium text-slate-700">Password</label>
                {% url 'password_reset' as reset_url %}
                {% if reset_url %}
                <a href="{{ reset_url }}" class="text-xs font-medium text-blue-600 hover:underline">Forgot?</a>
                {% endif %}
              </div>
              <div class="relative">
                <input
                  type="password"
                  name="{{ form.password.name }}"
                  id="{{ form.password.id_for_label }}"
                  placeholder="••••••••"
                  class="w-full rounded-lg border border-slate-300 bg-white px-3 py-2.5 pr-10 text-sm text-slate-800 placeholder-slate-400 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500" />
                <button type="button" id="togglePwd"
                        class="absolute inset-y-0 right-0 mr-2 inline-flex items-center rounded-md px-2 text-slate-500 hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        aria-label="Show password">
                  <!-- eye icon -->
                  <svg id="eyeOpen" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7Zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10Z"/><circle cx="12" cy="12" r="3"/></svg>
                  <svg id="eyeClosed" xmlns="http://www.w3.org/2000/svg" class="hidden h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="m2 5 17 17-1.5 1.5L15.7 21C14.5 21.3 13.3 21.5 12 21.5 5 21.5 1 14.5 1 14.5c.7-1.2 1.6-2.4 2.7-3.4L.5 7.2 2 5Z"/><path d="M23 14.5S19 21.5 12 21.5c-1.1 0-2.2-.1-3.2-.4l2.1-2.1c.4.1.7.1 1.1.1 4 0 7.2-2.7 8.8-4.6-.6-.7-1.3-1.4-2.1-2l1.4-1.4c1.1 1 2 2.2 2.9 3.8Z"/></svg>
                </button>
              </div>
              {% if form.password.errors %}
                <p class="mt-1 text-sm text-rose-600">{{ form.password.errors.0 }}</p>
              {% endif %}
            </div>

            <button type="submit"
                    class="mt-2 inline-flex w-full items-center justify-center rounded-lg bg-blue-600 px-4 py-2.5 text-sm font-medium text-white shadow-sm ring-1 ring-blue-700/30 transition hover:translate-y-[1px] hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
              Sign in
            </button>

            <p class="pt-2 text-center text-xs text-slate-500">&copy; 2025 Iboy Technology</p>
          </form>
        </div>
      </div>
    </main>

    <!-- show/hide password -->
    <script>
      (function(){
        const pwd = document.getElementById('{{ form.password.id_for_label }}');
        const btn = document.getElementById('togglePwd');
        const open = document.getElementById('eyeOpen');
        const closed = document.getElementById('eyeClosed');
        if (pwd && btn) {
          btn.addEventListener('click', () => {
            const isPwd = pwd.type === 'password';
            pwd.type = isPwd ? 'text' : 'password';
            open.classList.toggle('hidden', !isPwd);
            closed.classList.toggle('hidden', isPwd);
            btn.setAttribute('aria-label', isPwd ? 'Hide password' : 'Show password');
            pwd.focus();
          });
        }
      })();
    </script>
  </body>
</html>
